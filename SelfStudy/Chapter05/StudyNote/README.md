# Chapter 05. 標準ライブラリ
ライブラリ：コードから自在に呼び出せる命令


## 5.1. ライブラリの分類
1. 型と関数
* 関数：あらかじめ決められた機能を持つ道具
  * 値を表示する
  * 合計値を求める
  * 型を変換する
* 型：値の種類/範囲を表す情報
  * リスト
    * 値を挿入
    * 値を排除
  * 文字列
    * 検索
    * 置換
  * 日付/時刻
    * 比較
    * 加算

2. 組み込みライブラリとモジュール
* 組み込み関数/組み込み型：Python インタプリター (本体) に組み込まれている関数/型
* モジュール：builtin でない関数/型
  * 例 1. math モジュール： 数学関連の関数/型
  * 例 2. datatime モジュール：日付/時刻関連の関数/型

---

### *5.1.1. 関数*
関数：何かしらのパラメーターを与えることにより、あらかじめ決められた処理を行い、その結果を返す仕組み
* 引数：関数への入力
* 戻り値：出力

関数によっては以下の場合がある
1. 引数も戻り値もない：決められた処理を実行するのみ
2. 引数はないが、戻り値はある：決められた処理を実行し、結果を返すのみ
3. 引数はあるが、戻り値はない：与えられた値を処理するのみ
4. 引数も戻り値もある：与えられた値を処理し、結果も返す

構文例
```py
関数名(引数,...,引数名 = 値,...)

# 引数：「値...」と「名前 = 値,...」という場合がある
# 位置引数：「値...」
# キーワード引数：「名前 = 値,...」
```

```py
print('Hello', name, 'さん', sep = '+', end = '')

# 'Hello', name, 'さん' = 値をそのまま返す
# sep = '+', end = '' = 名前付きの値を渡す
```

---

### *5.1.2. 型*
型 (データ型)：コードの中で扱える値の種類を決めるための仕組み
* クラス：型をより専用的な用語 (設計図)
* インスタンス：クラスをもとに作られたオブジェクトのこと
* インスタンス化：型に対して具体的な値を与えて、コードの中で利用できるようにすること (クラスをインスタンス化してインスタンスを作成すること)

### [ 一般的なインスタンス化 ]
構文例
```py
型名(引数, ...)

# コンストラクター：型名を関数のように呼び出すことで、インスタンスを作成できる
```

datetimemodule.py 
```py
import datetime

today = datetime.date.today()
print(today)
```

実行結果
```
$ python3 datetimemodule.py 

2023-08-13
```


### [ 型に属する関数 ]
メソッド：型に属さない関数

構文例
```
インスタンス.メソッド(引数, ...)
```

sort_method.py
```py
data1 = [25, 3, 49, 67, 14]

data1.sort(reverse = True)  # sort メソッドを使う
print(data1)


data2 = [25, 3, 49, 67, 14]

print(sorted(data2, reverse = True))  # sorted 関数を使う
```

実行結果
```shell
$ python3 sort_method.py

[67, 49, 25, 14, 3]
[67, 49, 25, 14, 3]

# 結果は同じ
```

---

### *5.1.3. 組み込み型/関数とモジュール*
インポート：対象のモジュールを読み込むこと

構文例
```py
import モジュール名
```

import.py
```py
import math

print(math.floor(1.34))
```

実行結果
```shell
$ python3 import.py

1
```


## 5.2. 文字列の操作
### *5.2.1. 文字列の長さを取得する*

str_len.py
```py
title1 = 'プロジェクト'
print(len(title1))


title2 = 'testtitle'
print(len(title2))


import unicodedata
print(unicodedata.east_asian_width('あ'))
```

実行結果
```shell
$ python3 str_len.py

6
9
W  # W = 全角かな
<class 'str'>

# 日本語を正しく 1 文字としてカウントする
```

east_asian_width 関数の戻り値
| 分類 | 戻り値 | 意味 |
| --- | --- | --- |
| 全角 | F | Fullwidth (全角英数など) |
| 全角 | W | Wide (漢字や全角かななど) |
| 全角 | A | Ambiguous (特殊文字) |
| 半角 | Na | Narrow (半角英数など) |
| 半角 | H | Halfwidth (半角カタカナなど) |
| 半角 | N | Neutral (中立：いずれにも属さない) |

→ 戻り値が「F」「W」「A」の場合は文字幅を 2、それ以外は 1 としてカウント

str_len_width.py
```py
import unicodedata

data = 'WINGS プロジェクト 2020'
count = 0

for i in data:
    if unicodedata.east_asian_width(i) in 'FWA':
        count += 2
    else:
        count += 1

print(count)
```

実行結果
```shell
$ python3 str_len_width.py 

23

# WINGS = 5
# プロジェクト = 12
# 2020 = 4
# スペース * 2 = 2
```

---

### *5.2.2. 文字列を大文字小文字で変換する*
大文字/小文字の変換メソッド
| メソッド | 概要 |
| --- | --- |
| lower() | 大文字 → 小文字に変換 |
| upper() | 小文字 → 大文字に変換 |
| swapcase() | 大文字と小文字を反転 |
| capitalize() | 先頭文字を大文字に、以降を小文字に変換 |
| title() | 単語の先頭文字を大文字に、それ以外を小文字に変換 |
| casefold() | 大文字小文字の区別を除去 |

---

### *5.2.3. 部分文字列を取得する*

---

### *5.2.4. 文字の種類を判定する*

---

### *5.2.5. 文字列を検索する*

---

### *5.2.6. 文字列の前後から空白を除去する*

---

### *5.2.7. 文字列に特定の文字列が含まれるかを判定する*

---

### *5.2.8. 文字列を特定の区切り文字で分割する*

---

### *5.2.9. リストを結合する*

---

### *5.2.10. 文字列を置き換える*

---

### *5.2.11. 文字を整形する*

---

### *5.2.12. str 型 bytes 型を変換する*

---

## 5.3. 日付/時刻の操作